<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catálogo de Productos</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    text-align: center;
    padding: 20px;
    background: linear-gradient(135deg,#e3f2fd,#f1f8e9);
    color: #333;
  }
  h1 { color:#2c3e50; margin-bottom:10px; }
  input, textarea { padding:10px; margin:8px; border-radius:6px; border:1px solid #ccc; width:250px; }
  textarea { resize: vertical; height: 60px; }
  .hidden { display:none; }
  #contacto { margin-bottom: 20px; padding:20px; background:#2c3e50; color:white; border-radius:15px; }
  #contacto h3 { margin-bottom:10px; }
  #contacto p { margin:5px 0; font-size:1em; }
  #contacto a { color:#4cafef; text-decoration:none; font-weight:bold; }
  #productos { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:20px; margin-top:20px; }
  .producto { background:white; padding:15px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.15); transition: transform .2s, box-shadow .2s; }
  .producto:hover { transform:translateY(-5px); box-shadow:0 8px 20px rgba(0,0,0,0.2); }
  .producto img { max-width:100%; border-radius:10px; margin-bottom:10px; }
  .producto h3 { margin:10px 0 5px; font-size:1.2em; color:#34495e; }
  .producto p { margin:5px 0; color:#555; }
  button { margin:6px; padding:10px 15px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; transition: background .2s, transform .1s; }
  button:hover { transform:scale(1.05); }
  .btn-agregar { background:#4caf50; color:white; }
  .btn-agregar:hover { background:#43a047; }
  .btn-editar { background:#2196f3; color:white; }
  .btn-editar:hover { background:#1976d2; }
  .btn-eliminar { background:#e53935; color:white; }
  .btn-eliminar:hover { background:#c62828; }
  #adminPanel,#editPanel,#login { margin-top:30px; background:white; padding:20px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.15); }
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

</head>
<body>

<h1>📦 Catálogo de Productos</h1>

<!-- CONTACTO Y DIRECCIÓN -->
<div id="contacto">
  <h3>📞 Contacto</h3>
  <p>Teléfono: <a href="tel:3571314697">3571314697</a></p>
  <p>📍 Dirección: Pasaje Jerónimos Luis de Cabrera 874</p>
</div>

<!-- LOGIN ADMIN -->
<div id="login">
  <h2>Login Admin</h2>
  <input type="text" id="username" placeholder="Usuario">
  <input type="password" id="password" placeholder="Contraseña">
  <button class="btn-agregar" onclick="loginAdmin()">Entrar</button>
</div>

<!-- PRODUCTOS -->
<div id="productos"></div>

<!-- PANEL ADMIN (inicialmente oculto) -->
<div id="adminPanel" class="hidden">
  <h2>Agregar Producto</h2>
  <input type="text" id="nombre" placeholder="Nombre del producto">
  <input type="number" id="precio" placeholder="Precio">
  <textarea id="descripcion" placeholder="Descripción del producto"></textarea>
  <input type="text" id="imagen" placeholder="URL de la imagen">
  <button class="btn-agregar" onclick="agregarProducto()">Agregar Producto</button>
</div>

<!-- PANEL EDICIÓN (inicialmente oculto) -->
<div id="editPanel" class="hidden">
  <h2>Editar Producto</h2>
  <input type="text" id="editNombre" placeholder="Nuevo nombre">
  <input type="number" id="editPrecio" placeholder="Nuevo precio">
  <textarea id="editDescripcion" placeholder="Nueva descripción"></textarea>
  <input type="text" id="editImagen" placeholder="Nueva URL imagen">
  <button class="btn-editar" onclick="guardarEdicion()">Guardar Cambios</button>
  <button class="btn-eliminar" onclick="cancelarEdicion()">Cancelar</button>
</div>

<script>
const ADMIN_USER = "Belen192226";
const ADMIN_PASS = "Fran192226";
let isAdmin = false;
let editId = null;

// --------------------
// Configuración Firebase
// --------------------
const firebaseConfig = {
  apiKey: "TU_API_KEY",
  authDomain: "producto-a6e68.firebaseapp.com",
  projectId: "producto-a6e68",
  storageBucket: "producto-a6e68.appspot.com",
  messagingSenderId: "358261871993",
  appId: "1:358261871993:web:6aff27584ed1afd7d04ba8"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// --------------------
// LOGIN ADMIN
// --------------------
function loginAdmin() {
  const user = document.getElementById("username").value;
  const pass = document.getElementById("password").value;

  if(user === ADMIN_USER && pass === ADMIN_PASS) {
    isAdmin = true;
    document.getElementById("login").style.display = "none";
    document.getElementById("adminPanel").classList.remove("hidden");
    mostrarProductos();
  } else {
    alert("Usuario o contraseña incorrectos");
  }
}

// --------------------
// MOSTRAR PRODUCTOS
// --------------------
function mostrarProductos() {
  const cont = document.getElementById("productos");
  db.collection("productos").onSnapshot(snapshot => {
    cont.innerHTML = "";
    snapshot.forEach(doc => {
      const p = doc.data();
      const div = document.createElement("div");
      div.className = "producto";
      div.innerHTML = `
        <img src="${p.imagen}" alt="${p.nombre}">
        <h3>${p.nombre}</h3>
        <p>${p.descripcion}</p>
        <p>Precio: $${p.precio}</p>
        ${isAdmin ? `<button class="btn-editar" onclick="editarProducto('${doc.id}')">Editar</button>
                     <button class="btn-eliminar" onclick="eliminarProducto('${doc.id}')">Eliminar</button>` : ''}
      `;
      cont.appendChild(div);
    });
  });
}

// --------------------
// AGREGAR PRODUCTO
// --------------------
function agregarProducto() {
  if(!isAdmin) return;
  const nombre = document.getElementById("nombre").value;
  const precio = document.getElementById("precio").value;
  const descripcion = document.getElementById("descripcion").value;
  const imagen = document.getElementById("imagen").value;

  if(nombre && precio && descripcion && imagen) {
    db.collection("productos").add({nombre, precio, descripcion, imagen})
      .then(() => {
        document.getElementById("nombre").value="";
        document.getElementById("precio").value="";
        document.getElementById("descripcion").value="";
        document.getElementById("imagen").value="";
      })
      .catch(err => console.error("Error al agregar producto:", err));
  } else {
    alert("Complete todos los campos");
  }
}

// --------------------
// ELIMINAR PRODUCTO
// --------------------
function eliminarProducto(id) {
  if(!isAdmin) return;
  db.collection("productos").doc(id).delete()
    .catch(err => console.error("Error al eliminar producto:", err));
}

// --------------------
// EDITAR PRODUCTO
// --------------------
function editarProducto(id) {
  if(!isAdmin) return;
  editId = id;
  db.collection("productos").doc(id).get()
    .then(doc => {
      const p = doc.data();
      document.getElementById("editNombre").value = p.nombre;
      document.getElementById("editPrecio").value = p.precio;
      document.getElementById("editDescripcion").value = p.descripcion;
      document.getElementById("editImagen").value = p.imagen;
      document.getElementById("editPanel").classList.remove("hidden");
    });
}

function guardarEdicion() {
  if(!isAdmin || !editId) return;
  const nombre = document.getElementById("editNombre").value;
  const precio = document.getElementById("editPrecio").value;
  const descripcion = document.getElementById("editDescripcion").value;
  const imagen = document.getElementById("editImagen").value;

  db.collection("productos").doc(editId).update({nombre, precio, descripcion, imagen})
    .then(() => {
      document.getElementById("editPanel").classList.add("hidden");
      editId = null;
    })
    .catch(err => console.error("Error al actualizar producto:", err));
}

function cancelarEdicion() {
  document.getElementById("editPanel").classList.add("hidden");
  editId = null;
}

// --------------------
// Inicializar productos
// --------------------
mostrarProductos();
</script>

</body>
</html>
